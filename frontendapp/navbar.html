<nav class="navbar navbar-dark bg-dark justify-content-between fixed-top">
    <div class="container">
        <a class="navbar-brand" href="/">Secret Diary</a>
        <form class="form-inline">
            <button id="btn_myposts" class="btn btn-primary" style="display: none; margin-left: 20px;" type="button"
                    onclick="window.location.href='/myposts.html';">My Posts
            </button>
            <button id="btn_login" class="btn btn-success" style="display: none; margin-left: 20px;" type="button"
                    onclick="window.location.href='/login.html';">Login
            </button>
            <button id="btn_logout" class="btn btn-danger" style="display: none; margin-left: 20px;" type="button"
                    onclick="$.post('http://localhost:8080/users/expire', {'token': window.sessionStorage.removeItem('auth_token')}); window.sessionStorage.removeItem('auth_token'); window.location.href='/';">
                Logout
            </button>
            <button id="btn_register" class="btn btn-primary" style="display: none; margin-left: 20px;" type="button"
                    onclick="window.location.href='/register.html'">
                Register
            </button>
        </form>
    </div>
</nav>

<script type="text/javascript">
    (function ($) { //separate scope to keep everything "private" for each module
        $(function () {
            var loginBtn = document.getElementById("btn_login");
            var logoutBtn = document.getElementById("btn_logout");
            var registerBtn = document.getElementById("btn_register");
            var myPostsBtn = document.getElementById("btn_myposts");

            if (window.sessionStorage.getItem("auth_token") !== null) {
                loginBtn.style.display = "none";
                registerBtn.style.display = "none";

                myPostsBtn.style.display = "inline";
                logoutBtn.style.display = "inline";
            } else {
                loginBtn.style.display = "inline";
                registerBtn.style.display = "inline";

                myPostsBtn.style.display = "none";
                logoutBtn.style.display = "none";
            }
        });
    })(jQuery);
</script>
